<html>
<head>
    <title>DS</title>
    <script type="module" src="./js/ConsortiaSankey.js"></script>
    <link rel="stylesheet" href="./xac-sankey.css" />
</head>
<body>
<div class="c-sankey">
    <consortia-sankey id="js-sankey" />
</div>
<script>
    const el = document.getElementById('js-sankey')
    const ops = {
        useShadow: true,
        styleSheetPath: './xac-sankey.css'
    }
    el.setAttribute('options', btoa(JSON.stringify(ops)))

    const i = setInterval(()=> {
        if (el.setOptions) {
            console.log('Options...')
            clearInterval(i)
            el.setOptions(
                {
                    onNodeClickCallback: (e, d) => {
                      console.log('node clicked', d)
                    },
                    onLabelClickCallback: (e, d) => {
                        console.log('label clicked', d)
                    },
                    validFilterMap: {
                        group_name: 'dataset_group_name',
                        dataset_type: 'dataset_dataset_type',
                        organ: 'organ_type',
                        //source_type: 'source_type',
                        status: 'dataset_status'
                    }
                }
            )
        }
    }, 500)
</script>
</body>
</html>